REQ-LOCAL_BOOKMARKS_INDEX:
  name: Local Bookmarks Index Page
  category: Functional
  priority: P1
  status: Implemented
  rationale:
    why: See detail file
    problems_solved: []
    benefits: []
  satisfaction_criteria:
    - criterion: See detail file
  validation_criteria:
    - method: Manual verification
      coverage: See detail file
  traceability:
    architecture: []
    implementation: []
    tests: []
    code_annotations:
      - REQ-LOCAL_BOOKMARKS_INDEX
  related_requirements:
    depends_on: []
    related_to: []
    supersedes: []
  detail_file: requirements/REQ-LOCAL_BOOKMARKS_INDEX.yaml
  metadata:
    created:
      date: '2026-02-18'
      author: MCP converter
    last_updated:
      date: '2026-02-18'
      author: MCP converter
      reason: Converted from monolithic
    last_validated:
      date: '2026-02-18'
      validator: MCP converter
      result: pass
  backend: 'Primary data via message `getAggregatedBookmarksForIndex` (BookmarkRouter aggregates LocalBookmarkService + FileBookmarkService, each item tagged with `storage: ''local''` or `''file''`). Fallback: `getLocalBookmarksForIndex` uses LocalBookmarkService only (all items tagged `storage: ''local''`) when aggregated is unavailable.'
  cross-references: ARCH-LOCAL_BOOKMARKS_INDEX, IMPL-LOCAL_BOOKMARKS_INDEX, ARCH-STORAGE_INDEX_AND_ROUTER
  entry_point: 'Popup and/or options provide a link/button that opens the index page in a new tab via `chrome.tabs.create({ url: chrome.runtime.getURL(''src/ui/bookmarks-table/bookmarks-table.html'') })`.'
  how_validated:
    - 'Manual: Open index page, confirm local and file bookmarks load (Storage column shows Local | File); run search, filters, sort; click URL to open in new tab.'
    - 'Optional unit tests: `getAllBookmarks()` returns normalized list; handler for `getLocalBookmarksForIndex` uses LocalBookmarkService only; `getAggregatedBookmarksForIndex` returns merged local + file with storage field.'
  purpose:
    - Give users a single place to browse and search all non-Pinboard bookmarks (local + file).
    - Support finding and opening bookmarks without leaving the extension.
    - Show where each bookmark is stored (Local vs File) via a Storage column.
  related:
    - ARCH-LOCAL_BOOKMARKS_INDEX (architecture for dedicated page and aggregated local + file data source)
    - IMPL-LOCAL_BOOKMARKS_INDEX (getAggregatedBookmarksForIndex / getLocalBookmarksForIndex, message handler, bookmarks-table UI with Storage column)
    - ARCH-STORAGE_INDEX_AND_ROUTER (BookmarkRouter.getAllBookmarksForIndex)
    - REQ-STORAGE_MODE_DEFAULT (local vs Pinboard vs File mode)
    - REQ-CHROME_STORAGE_USAGE (chrome.storage.local)
  summary: A dedicated extension page shows **local and file-stored bookmarks** (chrome.storage.local via LocalBookmarkService, plus file-backed bookmarks from a user-chosen folder). Data is **live only**â€”no static or hardcoded bookmark data. The page must be **searchable** (text across title, URL, tags, notes), **filterable** (by tag, to-read, private), **sortable** (column click, including a **Storage** column Local | File; default time descending), and **launchable** (URL opens in new tab). Pinboard data is not shown in this index.
  table_page: Implements search (single input, case-insensitive match on description, url, tags, extended), filters (tag include, toread only, shared/private), sortable columns (Title, URL, Tags, Time, **Storage** (Local | File), Shared, To read; default sort time desc), and URL column as links (`target="_blank"`).
