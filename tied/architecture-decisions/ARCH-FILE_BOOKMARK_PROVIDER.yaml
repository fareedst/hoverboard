ARCH-FILE_BOOKMARK_PROVIDER:
  name: File-Based Bookmark Provider
  status: Active
  cross_references: &ref_0 []
  rationale:
    why: See detail file
    problems_solved: []
    benefits: []
  alternatives_considered: []
  implementation_approach:
    summary: 'A third bookmark storage backend is **file-based**: a single user-chosen directory contains one JSON file (e.g. `hoverboard-bookmarks.json`). The **FileBookmarkService** implements the same provider contract as PinboardService and LocalBookmarkService. File I/O runs in a **document context** (offscreen document or options page) because MV3 service workers cannot use the File System Access API; the directory handle is stored in **IndexedDB**.'
    details: []
  traceability:
    requirements: *ref_0
    implementation: []
    tests: []
    code_annotations:
      - ARCH-FILE_BOOKMARK_PROVIDER
  related_decisions:
    depends_on: *ref_0
    informs: []
    see_also: []
  detail_file: architecture-decisions/ARCH-FILE_BOOKMARK_PROVIDER.yaml
  metadata:
    created:
      date: '2026-02-18'
      author: MCP converter
    last_updated:
      date: '2026-02-18'
      author: MCP converter
      reason: Converted from monolithic
    last_validated:
      date: '2026-02-18'
      validator: MCP converter
      result: pass
  decision: 'A third bookmark storage backend is **file-based**: a single user-chosen directory contains one JSON file (e.g. `hoverboard-bookmarks.json`). The **FileBookmarkService** implements the same provider contract as PinboardService and LocalBookmarkService. File I/O runs in a **document context** (offscreen document or options page) because MV3 service workers cannot use the File System Access API; the directory handle is stored in **IndexedDB**.'
  adapter_abstraction: readBookmarksFile(), writeBookmarksFile(data). Enables unit tests with in-memory mock; real adapter uses File System Access (directory handle + getFileHandle + createWritable/read) in offscreen or options context.
  cross-references: REQ-FILE_BOOKMARK_STORAGE, ARCH-LOCAL_STORAGE_PROVIDER, IMPL-FILE_BOOKMARK_SERVICE
  file_format: '`{ "version": 1, "bookmarks": { "<url>": { ... } } }` â€” same bookmark shape as local storage.'
  problem: No way to store bookmarks in a cloud-synced folder or share a file with ad-hoc groups.
  related:
    - IMPL-FILE_BOOKMARK_SERVICE (service and adapter implementation)
    - ARCH-LOCAL_STORAGE_PROVIDER (strategy pattern for providers)
  solution: File-based provider with one file per directory; file format versioned for compatibility.
  summary: 'A third bookmark storage backend is **file-based**: a single user-chosen directory contains one JSON file (e.g. `hoverboard-bookmarks.json`). The **FileBookmarkService** implements the same provider contract as PinboardService and LocalBookmarkService. File I/O runs in a **document context** (offscreen document or options page) because MV3 service workers cannot use the File System Access API; the directory handle is stored in **IndexedDB**.'
