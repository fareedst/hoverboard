IMPL-UI_INSPECTOR:
  name: UI Inspector
  status: Active
  cross_references:
    - ARCH-UI_TESTABILITY
    - REQ-UI_INSPECTION
  rationale:
    why: Optional action and message log for testing and debugging when enabled
    problems_solved:
      - Cannot inspect message flow and UI actions in tests or manually
    benefits:
      - recordMessage/recordAction ring buffers; getLastMessages/getLastActions; gated by DEBUG_HOVERBOARD_UI or setEnabled
  implementation_approach:
    summary: src/shared/ui-inspector.js; wired in service-worker (recordMessage), PopupController (recordAction), content-main (recordAction)
  code_locations:
    files:
      - path: src/shared/ui-inspector.js
        description: UI inspector
      - path: src/core/service-worker.js
        description: recordMessage wiring
      - path: src/ui/popup/PopupController.js
        description: recordAction wiring
      - path: src/features/content/content-main.js
        description: recordAction wiring
    functions: []
  traceability:
    architecture:
      - ARCH-UI_TESTABILITY
    requirements:
      - REQ-UI_INSPECTION
    tests: []
    code_annotations:
      - IMPL-UI_INSPECTOR
  related_decisions:
    depends_on: []
    supersedes: []
    see_also: []
    composed_with:
      - IMPL-UI_ACTION_CONTRACT
      - IMPL-MESSAGE_HANDLING
  essence_pseudocode: |
    INPUT: message (recordMessage); action (recordAction); gated by DEBUG_HOVERBOARD_UI or setEnabled(true)
    OUTPUT: ring buffers of last N messages and last N actions; getLastMessages(), getLastActions()
    DATA: message ring buffer; action ring buffer; enabled flag

    recordMessage(msg): IF enabled: APPEND to message buffer; DROP oldest if full
    recordAction(action): IF enabled: APPEND to action buffer; DROP oldest if full

    getLastMessages(), getLastActions(): RETURN copy of buffer(s)

    Wiring: service-worker after handle message -> recordMessage; PopupController/content-main on action -> recordAction
  detail_file: implementation-decisions/IMPL-UI_INSPECTOR.yaml
  metadata:
    created:
      date: "2026-02-17"
      author: AI Agent
    last_updated:
      date: "2026-02-20"
      author: AI Agent
      reason: Add essence_pseudocode and complete composed_with
