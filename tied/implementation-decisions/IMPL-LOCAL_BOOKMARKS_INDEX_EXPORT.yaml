IMPL-LOCAL_BOOKMARKS_INDEX_EXPORT:
  name: Local Bookmarks Index Export Implementation
  status: Active
  cross_references:
    - ARCH-LOCAL_BOOKMARKS_INDEX_EXPORT
    - REQ-LOCAL_BOOKMARKS_INDEX_EXPORT
  rationale:
    why: See detail file
    problems_solved: []
    benefits: []
  implementation_approach:
    summary: See detail file
    details: []
  code_locations:
    files:
      - src/ui/bookmarks-table/bookmarks-table.js
      - src/ui/bookmarks-table/bookmarks-table-csv.js
    functions:
      - exportBookmarks
      - updateExportButtonState
      - buildCsv
      - escapeCsvField
  traceability:
    architecture:
      - ARCH-LOCAL_BOOKMARKS_INDEX_EXPORT
    requirements:
      - REQ-LOCAL_BOOKMARKS_INDEX_EXPORT
    tests:
      - tests/unit/bookmarks-table-export.test.js
    code_annotations:
      - IMPL-LOCAL_BOOKMARKS_INDEX_EXPORT
      - ARCH-LOCAL_BOOKMARKS_INDEX_EXPORT
      - REQ-LOCAL_BOOKMARKS_INDEX_EXPORT
  related_decisions:
    depends_on: []
    supersedes: []
    see_also:
      - ARCH-LOCAL_BOOKMARKS_INDEX_EXPORT
      - REQ-LOCAL_BOOKMARKS_INDEX_EXPORT
  detail_file: implementation-decisions/IMPL-LOCAL_BOOKMARKS_INDEX_EXPORT.yaml
  metadata:
    created:
      date: '2026-02-18'
      author: MCP converter
    last_updated:
      date: '2026-02-18'
      author: MCP converter
      reason: Converted from monolithic
    last_validated:
      date: '2026-02-18'
      validator: MCP converter
      result: pass
  annotations: Use [REQ-LOCAL_BOOKMARKS_INDEX_EXPORT], [ARCH-LOCAL_BOOKMARKS_INDEX_EXPORT], [IMPL-LOCAL_BOOKMARKS_INDEX_EXPORT] in HTML/CSS/JS comments.
  cross-references: ARCH-LOCAL_BOOKMARKS_INDEX_EXPORT, REQ-LOCAL_BOOKMARKS_INDEX_EXPORT
  logic: 'In bookmarks-table.js, `exportBookmarks(scope)` where scope is `''all''`, `''displayed''`, or `''selected''`. For all: use `allBookmarks`; for displayed: use `filteredBookmarks`; for selected: use `allBookmarks.filter(b => selectedUrls.has(b.url))`. Serialize to CSV (escape quotes, columns: description, url, tags, time, storage (Local | File | Sync), shared, toread, extended); filename `hoverboard-bookmarks-{scope}-{ISO date}.csv`; Blob, object URL, programmatic click on `<a download>`, revoke URL. `updateExportButtonState()` disables Export selected when `selectedUrls.size === 0`; called from `updateMoveControlsState()` so selection changes update it.'
  related:
    - IMPL-LOCAL_BOOKMARKS_INDEX (index page this export extends)
    - ARCH-LOCAL_BOOKMARKS_INDEX_EXPORT, REQ-LOCAL_BOOKMARKS_INDEX_EXPORT
  ui: 'Export and Move controls are in an **actions-below-table** block below the bookmarks table (compact header above). Export row: three buttons â€” "Export all", "Export displayed", "Export selected". Export selected enabled only when at least one bookmark is selected. Buttons disabled when the corresponding scope has zero bookmarks.'
