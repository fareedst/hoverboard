IMPL-DEBUG_PANEL:
  name: Debug panel and structured UI/message logging
  status: Active
  cross_references:
    - REQ-UI_INSPECTION
    - ARCH-UI_TESTABILITY
  rationale:
    why: Consistent DEBUG/TRACE labels for UI and message flow; optional in-extension view of last N actions and state
    problems_solved:
      - Ad-hoc console.log/debugLog scattered across message-handler, popup, content
    benefits:
      - debug-logger.js categories (ui, message, overlay, storage); debug panel shows inspector ring buffers and current tab state via DEV_COMMAND
  implementation_approach:
    summary: LOG_CATEGORIES in debug-logger; debugLogger.trace/debug in message-handler, PopupController, content-main; src/ui/debug/debug.html + debug.js (last actions, last messages, current bookmark/tags/backend)
  code_locations:
    files:
      - path: src/shared/debug-logger.js
        description: LOG_CATEGORIES, debugLogger
      - path: src/core/message-handler.js
        description: debugLogger usage
      - path: src/ui/popup/PopupController.js
        description: debugLogger usage
      - path: src/features/content/content-main.js
        description: debugLogger usage
      - path: src/ui/debug/debug.html
        description: Debug panel HTML
      - path: src/ui/debug/debug.js
        description: Debug panel logic
    functions: []
  traceability:
    architecture:
      - ARCH-UI_TESTABILITY
    requirements:
      - REQ-UI_INSPECTION
    tests: []
    code_annotations:
      - IMPL-DEBUG_PANEL
  related_decisions:
    depends_on: []
    supersedes: []
    see_also: []
    composed_with:
      - IMPL-UI_INSPECTOR
      - IMPL-DEV_COMMAND_INSPECTION
  essence_pseudocode: |
    INPUT: LOG_CATEGORIES (ui, message, overlay, storage); optional debug panel open
    OUTPUT: debugLogger.trace/debug in message-handler, PopupController, content-main; debug panel shows last actions, last messages, current bookmark/tags/backend
    DATA: debug-logger.js; debug.html + debug.js; inspector ring buffers

    Logging: WHEN category enabled: debugLogger.trace(msg) or debugLogger.debug(msg) with category

    Debug panel (debug.html): ON load SEND DEV_COMMAND getLastActions/getLastMessages/getCurrentBookmark (or getStorageSnapshot); RENDER in panel
  detail_file: implementation-decisions/IMPL-DEBUG_PANEL.yaml
  metadata:
    created:
      date: "2026-02-17"
      author: AI Agent
    last_updated:
      date: "2026-02-20"
      author: AI Agent
      reason: Add essence_pseudocode and complete composed_with
