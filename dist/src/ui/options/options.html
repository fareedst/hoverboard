<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hoverboard Options</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>
        <img src="../../../icons/hoverboard_48.png" alt="Hoverboard" class="logo">
        Hoverboard Settings
      </h1>
      <p class="subtitle">Configure your Pinboard integration and extension behavior</p>
    </header>

    <main class="main">
      <!-- Storage Mode: [ARCH-LOCAL_STORAGE_PROVIDER] -->
      <section class="section" id="storage-mode-section">
        <h2>Storage Mode</h2>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" name="storage-mode" id="storage-mode-pinboard" value="pinboard">
            <span>Pinboard (cloud)</span>
          </label>
          <p class="help-text">Sync bookmarks with Pinboard.in. Requires API token below.</p>
        </div>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" name="storage-mode" id="storage-mode-local" value="local">
            <span>Local Storage (offline)</span>
          </label>
          <p class="help-text">Bookmarks will be stored locally in your browser. No external service is used.</p>
        </div>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" name="storage-mode" id="storage-mode-file" value="file">
            <span>File (cloud-sync folder)</span>
          </label>
          <p class="help-text">Bookmarks stored in a file. Enter a path (directory); the native host reads/writes <code>hoverboard-bookmarks.json</code> there. Default: <code>~/.hoverboard</code>. Requires native host installed.</p>
        </div>
        <div class="form-group">
          <label class="radio-label">
            <input type="radio" name="storage-mode" id="storage-mode-sync" value="sync">
            <span>Sync (browser, synced)</span>
          </label>
          <p class="help-text">Bookmarks sync across devices signed into the same Chrome profile. <strong>Quota is approximately 100 KB</strong>; users with many bookmarks may hit the limit.</p>
        </div>
        <div class="form-group" id="file-storage-path-group">
          <label for="file-storage-path">Path (directory for bookmark file)</label>
          <input type="text" id="file-storage-path" class="input-text" placeholder="~/.hoverboard" aria-label="File storage path">
        </div>
        <div class="form-group" id="file-storage-folder-group">
          <button type="button" id="select-file-storage-folder" class="btn btn-secondary">Select folder (browser picker)</button>
          <span id="file-storage-folder-name" class="help-text" style="margin-left: 0.5em;"></span>
        </div>
      </section>

      <!-- Authentication Section (used when Storage Mode is Pinboard) -->
      <section class="section" id="auth-section">
        <h2>Authentication</h2>
        <div class="form-group">
          <label for="auth-token">Pinboard API Token</label>
          <input type="password" id="auth-token" placeholder="username:XXXXXXXXXXXXXX">
          <p class="help-text">
            Get your API token from <a href="https://pinboard.in/settings/password" target="_blank">Pinboard Settings</a>. Leave empty and save to disable Pinboard.
          </p>
        </div>
        <button id="test-auth" class="btn btn-secondary">Test Connection</button>
      </section>

      <!-- [REQ-AI_TAGGING_CONFIG] [ARCH-AI_TAGGING_CONFIG] [IMPL-AI_CONFIG_OPTIONS] AI Tagging -->
      <section class="section" id="ai-tagging-section">
        <h2>AI Tagging</h2>
        <p class="help-text">Optional: use OpenAI or Gemini to suggest tags for the current page from the popup. Leave API key empty to disable.</p>
        <div class="form-group">
          <label for="ai-api-key">AI API Key</label>
          <input type="password" id="ai-api-key" class="input-text" placeholder="sk-... or API key" aria-label="AI API Key" autocomplete="off">
        </div>
        <div class="form-group">
          <label for="ai-provider">Provider</label>
          <select id="ai-provider" class="input-text" aria-label="AI provider">
            <option value="openai">OpenAI</option>
            <option value="gemini">Gemini</option>
          </select>
        </div>
        <div class="form-group">
          <label for="ai-tag-limit">Max tags (default 64)</label>
          <input type="number" id="ai-tag-limit" min="1" max="128" value="64" aria-label="Max AI tags">
        </div>
        <button id="test-ai-api" class="btn btn-secondary">Test API key</button>
        <span id="ai-test-status" class="help-text" style="margin-left: 0.5em;"></span>
      </section>

      <!-- [REQ-NATIVE_HOST_WRAPPER] Native host (optional): test connectivity -->
      <section class="section" id="native-host-section">
        <h2>Native Host</h2>
        <p class="help-text">Optional native messaging host for features that need local code. Install once using the scripts in the extension‚Äôs <code>native_host</code> folder, then test below.</p>
        <button id="test-native-host" class="btn btn-secondary">Test native host</button>
        <span id="native-host-status" class="help-text" style="margin-left: 0.5em;"></span>
      </section>

      <!-- Display Settings -->
      <section class="section">
        <h2>Display Settings</h2>
        
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="show-hover-on-load">
            <span class="checkmark"></span>
            Show hover overlay on page load
          </label>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="hover-show-tooltips">
            <span class="checkmark"></span>
            Show tooltips in hover overlay
          </label>
        </div>

        <div class="form-group">
          <label for="recent-posts-count">Number of recent posts to show</label>
          <input type="number" id="recent-posts-count" min="5" max="50" value="15">
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="show-section-labels">
            <span class="checkmark"></span>
            Show section labels in popup (Quick Actions, Search Tabs)
          </label>
        </div>
      </section>

      <!-- Visibility Defaults -->
      <section class="section">
        <h2>üé® Overlay Visibility Defaults</h2>
        <p class="help-text">Set global default appearance for overlay visibility controls. These can be overridden per-window during use.</p>
        
        <div class="visibility-defaults-container">
          <div class="form-group">
            <label>Default Theme</label>
            <button id="default-theme-toggle" class="theme-toggle-btn" title="Switch between light and dark themes">
              <span class="theme-icon">‚òÄÔ∏è</span>
              <span class="theme-text">Light</span>
            </button>
            <p class="help-text">Choose between light text on dark background or dark text on light background</p>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="default-transparency-enabled">
              <span class="checkmark"></span>
              Enable transparency by default
            </label>
          </div>

          <div class="form-group opacity-setting">
            <label for="default-background-opacity">Default background opacity (%)</label>
            <div class="slider-container">
              <input type="range" id="default-background-opacity" min="10" max="100" value="90">
              <span class="opacity-value">90%</span>
            </div>
            <p class="help-text">Background opacity when transparency is enabled (10% = very transparent, 100% = opaque)</p>
          </div>

          <div class="preview-container">
            <div class="preview-overlay" id="visibility-preview">
              <div class="preview-content">
                <strong>Preview:</strong> This shows how the overlay will appear with your default settings
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Font Size Settings -->
      <section class="section">
        <h2>üìù Font Size Settings</h2>
        <p class="help-text">Customize font sizes across the extension interface (in pixels)</p>
        
        <div class="form-group">
          <label for="font-size-suggested-tags">Suggested tags font size</label>
          <input type="number" id="font-size-suggested-tags" min="8" max="20" value="10">
          <p class="help-text">Size for suggested tag text (recommended: 8-12px)</p>
        </div>

        <div class="form-group">
          <label for="font-size-labels">Labels font size (Current, Recent, Suggested)</label>
          <input type="number" id="font-size-labels" min="10" max="16" value="12">
          <p class="help-text">Size for section label text (recommended: 10-14px)</p>
        </div>

        <div class="form-group">
          <label for="font-size-tags">Tag elements font size</label>
          <input type="number" id="font-size-tags" min="10" max="16" value="12">
          <p class="help-text">Size for current and recent tag text (recommended: 10-14px)</p>
        </div>

        <div class="form-group">
          <label for="font-size-base">Base UI font size</label>
          <input type="number" id="font-size-base" min="12" max="18" value="14">
          <p class="help-text">Size for general UI text (recommended: 12-16px)</p>
        </div>

        <div class="form-group">
          <label for="font-size-inputs">Input and button font size</label>
          <input type="number" id="font-size-inputs" min="12" max="18" value="14">
          <p class="help-text">Size for input fields and buttons (recommended: 12-16px)</p>
        </div>
      </section>

      <!-- Badge Settings -->
      <section class="section">
        <h2>Badge Settings</h2>
        
        <div class="form-group">
          <label for="badge-not-bookmarked">Text when not bookmarked</label>
          <input type="text" id="badge-not-bookmarked" maxlength="4" value="-">
        </div>

        <div class="form-group">
          <label for="badge-no-tags">Text when bookmarked with no tags</label>
          <input type="text" id="badge-no-tags" maxlength="4" value="0">
        </div>

        <div class="form-group">
          <label for="badge-private">Text indicator for private bookmarks</label>
          <input type="text" id="badge-private" maxlength="4" value="*">
        </div>

        <div class="form-group">
          <label for="badge-to-read">Text indicator for to-read bookmarks</label>
          <input type="text" id="badge-to-read" maxlength="4" value="!">
        </div>
      </section>

      <!-- Site Management -->
      <section class="section">
        <h2>Site Management</h2>
        
        <div class="form-group">
          <label for="inhibit-urls">Disabled Sites (one per line)</label>
          <textarea id="inhibit-urls" rows="6" placeholder="example.com&#10;subdomain.example.org"></textarea>
          <p class="help-text">
            Extension will not activate on these sites
          </p>
        </div>
      </section>

      <!-- Advanced Settings -->
      <section class="section">
        <h2>Advanced</h2>
        
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="strip-url-hash">
            <span class="checkmark"></span>
            Strip URL hash when saving bookmarks
          </label>
        </div>

        <div class="form-group">
          <label for="auto-close-timeout">Auto-close timeout (ms, 0 to disable)</label>
          <input type="number" id="auto-close-timeout" min="0" max="10000" step="100" value="0">
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="actions">
        <button id="save-settings" class="btn btn-primary">Save Settings</button>
        <button id="reset-settings" class="btn btn-secondary">Reset to Defaults</button>
        <button id="export-settings" class="btn btn-secondary">Export Settings</button>
        <input type="file" id="import-file" accept=".json" style="display: none;">
        <button id="import-settings" class="btn btn-secondary">Import Settings</button>
      </div>
      
      <div class="status" id="status-message"></div>
      
      <div class="info">
        <p>Hoverboard v1.0.0 | <a href="https://github.com/your-repo/hoverboard" target="_blank">GitHub</a> | <a id="bookmarks-index-link" href="#" target="_blank">Local bookmarks index</a> | <a id="browser-bookmark-import-link" href="#" target="_blank">Browser bookmark import</a></p>
      </div>
    </footer>
  </div>

  <script type="module" src="options.js"></script>
</body>
</html> 